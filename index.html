<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Quote Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gray: #C1C8C9;
            --primary-sage: #628372;
            --primary-forest: #00522A;
            --primary-sky: #6CA6DA;
            --primary-olive: #BBB075;
            --primary-brown: #9A6233;
            --primary-navy: #0F162A;
            --secondary-cream: #F8E3C9;
            --secondary-yellow: #FFED96;
            --secondary-olive-gold: #9B9736;
            --secondary-deep-red: #692E2B;
            --secondary-coral: #D6603B;
            --secondary-burgundy: #9C1B3B;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--secondary-cream), var(--primary-gray));
            min-height: 100vh;
            color: var(--primary-navy);
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary-forest), var(--primary-sage));
        }

        .login-box {
            background: white;
            padding: 3rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(15, 22, 42, 0.3);
            text-align: center;
            min-width: 350px;
        }

        .login-box h1 {
            color: var(--primary-forest);
            margin-bottom: 1.5rem;
            font-size: 2rem;
        }

        .login-box input {
            width: 100%;
            padding: 1rem;
            margin: 1rem 0;
            border: 2px solid var(--primary-gray);
            border-radius: 8px;
            font-size: 1.2rem;
            text-align: center;
            letter-spacing: 0.3em;
        }

        .login-box input:focus {
            outline: none;
            border-color: var(--primary-sage);
            box-shadow: 0 0 0 3px rgba(98, 131, 114, 0.2);
        }

        .login-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary-sage);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .login-btn:hover {
            background: var(--primary-forest);
        }

        .error-message {
            color: var(--secondary-burgundy);
            margin-top: 1rem;
            font-weight: bold;
        }

        .main-container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(15, 22, 42, 0.1);
        }

        .header h1 {
            color: var(--primary-forest);
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .section {
            background: white;
            margin: 2rem 0;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(15, 22, 42, 0.1);
            position: relative;
        }

        .section h2 {
            color: var(--primary-forest);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            border-bottom: 2px solid var(--primary-sage);
            padding-bottom: 0.5rem;
        }

        .section-controls {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            display: flex;
            gap: 0.5rem;
        }

        .running-total {
            background: var(--secondary-cream);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border: 2px solid var(--primary-sage);
            text-align: center;
            font-weight: bold;
            color: var(--primary-forest);
        }

        .form-group {
            margin: 1rem 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--primary-navy);
            font-weight: bold;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--primary-gray);
            border-radius: 8px;
            font-size: 1rem;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary-sage);
            box-shadow: 0 0 0 3px rgba(98, 131, 114, 0.2);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s;
            margin: 0.5rem;
        }

        .btn-primary {
            background: var(--primary-sage);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-forest);
        }

        .btn-secondary {
            background: var(--primary-sky);
            color: white;
        }

        .btn-secondary:hover {
            background: var(--primary-brown);
        }

        .btn-danger {
            background: var(--secondary-burgundy);
            color: white;
        }

        .btn-danger:hover {
            background: var(--secondary-deep-red);
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }

        .btn-clear {
            background: var(--secondary-coral);
            color: white;
        }

        .btn-clear:hover {
            background: var(--secondary-deep-red);
        }

        .service-type-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }

        .service-type-buttons .btn {
            flex: 1;
            max-width: 200px;
        }

        .alert {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            font-weight: bold;
        }

        .alert-warning {
            background: var(--secondary-yellow);
            color: var(--secondary-deep-red);
            border: 2px solid var(--secondary-coral);
        }

        .date-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .date-table th, .date-table td {
            border: 2px solid var(--primary-gray);
            padding: 0.75rem;
            text-align: center;
        }

        .date-table th {
            background: var(--primary-sage);
            color: white;
            font-weight: bold;
        }

        .date-table input {
            width: 100%;
            border: none;
            padding: 0.5rem;
            text-align: center;
            background: transparent;
        }

        .space-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .space-card {
            border: 2px solid var(--primary-gray);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .space-card:hover {
            border-color: var(--primary-sage);
            box-shadow: 0 3px 10px rgba(98, 131, 114, 0.2);
        }

        .space-card.selected {
            border-color: var(--primary-forest);
            background: var(--secondary-cream);
            box-shadow: 0 5px 15px rgba(0, 82, 42, 0.2);
        }

        .space-card h3 {
            color: var(--primary-forest);
            margin-bottom: 0.5rem;
        }

        .space-rates {
            font-size: 0.9rem;
            color: var(--primary-navy);
        }

        .headcount-input {
            margin-top: 1rem;
            display: none;
        }

        .headcount-input.show {
            display: block;
        }

        .headcount-input input {
            margin-top: 0.5rem;
        }

        .event-date-section {
            background: var(--secondary-cream);
            margin: 2rem 0;
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid var(--primary-sage);
        }

        .event-date-section h3 {
            color: var(--primary-forest);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            border-bottom: 1px solid var(--primary-sage);
            padding-bottom: 0.5rem;
        }

        .addons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .addon-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            border: 1px solid var(--primary-gray);
            border-radius: 8px;
        }

        .addon-item input[type="checkbox"] {
            transform: scale(1.2);
        }

        .addon-item.special {
            background: var(--secondary-cream);
        }

        .quote-display {
            background: var(--secondary-cream);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            border: 3px solid var(--primary-sage);
        }

        .quote-display h3 {
            color: var(--primary-forest);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .quote-day {
            margin: 1rem 0;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            border-left: 4px solid var(--primary-sage);
        }

        .quote-total {
            background: var(--primary-forest);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 1rem;
        }

        .business-hours-toggle {
            margin-left: 1rem;
            padding: 0.25rem 0.5rem;
            font-size: 0.8rem;
        }

        .final-actions {
            background: var(--primary-forest);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            margin: 2rem 0;
        }

        .final-actions h3 {
            margin-bottom: 1rem;
        }

        .hidden {
            display: none !important;
        }

        .collapsed {
            display: none !important;
        }

        .consecutive-btn {
            background: var(--secondary-yellow);
            color: var(--primary-navy);
        }

        .consecutive-btn:hover {
            background: var(--secondary-olive-gold);
        }

        .date-list {
            margin: 1rem 0;
            padding: 1rem;
            background: var(--secondary-cream);
            border-radius: 8px;
        }

        .date-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            margin: 0.25rem 0;
            background: white;
            border-radius: 5px;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.5rem;
            margin: 0.5rem 0;
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 1rem;
            }
            
            .service-type-buttons {
                flex-direction: column;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .space-selection {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="loginContainer" class="login-container">
        <div class="login-box">
            <h1>üè® Hotel Quote Generator</h1>
            <p style="color: var(--primary-navy); margin-bottom: 1.5rem;">Please enter your access code to continue</p>
            <input type="password" id="passwordInput" placeholder="Enter 4-digit code" maxlength="4">
            <button class="login-btn" onclick="checkPassword()">Access System</button>
            <div id="errorMessage" class="error-message"></div>
        </div>
    </div>

    <div id="mainContainer" class="main-container">
        <div class="header">
            <h1>üè® Hotel Quote Generator</h1>
            <p>Professional quoting tool for room blocks, events, and combo packages</p>
        </div>

        <!-- Client Information Section -->
        <div class="section">
            <h2>Client Information</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="clientFirstName">First Name</label>
                    <input type="text" id="clientFirstName" placeholder="Enter client's first name">
                </div>
                <div class="form-group">
                    <label for="clientLastName">Last Name</label>
                    <input type="text" id="clientLastName" placeholder="Enter client's last name">
                </div>
                <div class="form-group">
                    <label for="clientEmail">Email</label>
                    <input type="email" id="clientEmail" placeholder="Enter client's email">
                </div>
                <div class="form-group">
                    <label for="groupName">Group Name</label>
                    <input type="text" id="groupName" placeholder="Enter group name">
                </div>
            </div>
        </div>

        <!-- Service Type Selection -->
        <div class="section">
            <h2>Service Type</h2>
            <div class="service-type-buttons">
                <button class="btn btn-primary" onclick="selectServiceType('rooms')">Rooms Only</button>
                <button class="btn btn-primary" onclick="selectServiceType('event')">Event Only</button>
                <button class="btn btn-primary" onclick="selectServiceType('combo')">Rooms and Event</button>
            </div>
        </div>

        <!-- Rooms Section -->
        <div id="roomsSection" class="section hidden">
            <div class="section-controls">
                <button class="btn btn-clear btn-small" onclick="clearRoomsSection()">Clear Section</button>
                <button class="btn btn-secondary btn-small" onclick="toggleRoomsSection()">Collapse</button>
            </div>
            <h2>Room Block Details</h2>
            <div id="roomsSectionContent">
                <div class="form-row">
                    <div class="form-group">
                        <label for="checkInDate">Check-in Date</label>
                        <input type="date" id="checkInDate" onchange="updateRoomDates()">
                    </div>
                    <div class="form-group">
                        <label for="checkOutDate">Check-out Date</label>
                        <input type="date" id="checkOutDate" onchange="updateRoomDates()">
                    </div>
                </div>
                <button class="btn btn-primary" onclick="generateRoomTable()">Add Rooms</button>
                
                <div id="businessPatternAlert" class="alert alert-warning hidden">
                    ‚ö†Ô∏è <strong>Business Pattern Alert:</strong> This date pattern may impact occupancy efficiency.
                </div>
                
                <div id="roomTableContainer"></div>
                <div id="roomsRunningTotal" class="running-total hidden">
                    <strong>Running Total: $<span id="roomsTotalAmount">0</span></strong>
                </div>
                
                <div id="roomsActions" class="hidden">
                    <button class="btn btn-secondary" onclick="viewRoomsQuote()">View Quote</button>
                    <button class="btn btn-primary" id="roomsEmailBtn" onclick="generateRoomsEmail()">Generate Email</button>
                </div>
            </div>
        </div>

        <!-- Events Section -->
        <div id="eventsSection" class="section hidden">
            <div class="section-controls">
                <button class="btn btn-clear btn-small" onclick="clearEventsSection()">Clear Section</button>
                <button class="btn btn-secondary btn-small" onclick="toggleEventsSection()">Collapse</button>
            </div>
            <h2>Event Details</h2>
            <div id="eventsSectionContent">
                <div class="form-row">
                    <div class="form-group">
                        <label for="eventDate">Event Date</label>
                        <input type="date" id="eventDate">
                        <button class="btn btn-secondary btn-small" onclick="addEventDate()">Add Date</button>
                    </div>
                </div>
                
                <div id="consecutiveButtonContainer"></div>
                <div id="eventDatesList" class="date-list hidden"></div>
                
                <div id="eventDatesContainer"></div>
                <div id="eventsRunningTotal" class="running-total hidden">
                    <strong>Event Running Total: $<span id="eventsTotalAmount">0</span></strong>
                </div>
                
                <div id="eventAddonsSection" class="section hidden">
                    <h2>Event Add-ons (Optional)</h2>
                    <div class="addons-grid">
                        <div class="addon-item">
                            <input type="checkbox" id="projector" value="350" onchange="updateEventsTotal()">
                            <label for="projector">Projector - $350</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="screen" value="150" onchange="updateEventsTotal()">
                            <label for="screen">Screen - $150</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="speakerSystem" value="150" onchange="updateEventsTotal()">
                            <label for="speakerSystem">Speaker System - $150</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="monitor75" value="300" onchange="updateEventsTotal()">
                            <label for="monitor75">75" Portable Monitor - $300</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="handheldMic" value="75" onchange="updateEventsTotal()">
                            <label for="handheldMic">Handheld Microphone - $75</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="lavalierMic" value="75" onchange="updateEventsTotal()">
                            <label for="lavalierMic">Lavalier Microphone - $75</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="podium" value="50" onchange="updateEventsTotal()">
                            <label for="podium">Podium - $50</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="executiveBlotter" value="25" onchange="updateEventsTotal()">
                            <label for="executiveBlotter">Executive Blotter - $25</label>
                        </div>
                        <div class="addon-item special">
                            <input type="checkbox" id="avTechnician" value="150" onchange="toggleAVTechHours()">
                            <label for="avTechnician">AV Technician - $150/hr</label>
                            <input type="number" id="avTechHours" min="1" placeholder="Hours" style="width: 80px; margin-left: 10px;" class="hidden" onchange="updateEventsTotal()">
                        </div>
                        <div class="addon-item special">
                            <input type="checkbox" id="chefAttendant" value="250" onchange="toggleChefDates()">
                            <label for="chefAttendant">Chef Attendant - $250</label>
                            <div id="chefDatesContainer" class="checkbox-grid hidden"></div>
                        </div>
                        <div class="addon-item special">
                            <input type="checkbox" id="coatCheckAttendant" value="175" onchange="toggleCoatCheckDates()">
                            <label for="coatCheckAttendant">Coat Check Attendant - $175</label>
                            <div id="coatCheckDatesContainer" class="checkbox-grid hidden"></div>
                        </div>
                    </div>
                </div>
                
                <div id="eventsActions" class="hidden">
                    <button class="btn btn-secondary" onclick="viewEventsQuote()">View Quote</button>
                    <button class="btn btn-primary" id="eventsEmailBtn" onclick="generateEventsEmail()">Generate Email</button>
                </div>
            </div>
        </div>

        <!-- Final Actions for Combo -->
        <div id="finalActions" class="final-actions hidden">
            <h3>Generate Complete Quote</h3>
            <button class="btn btn-primary" onclick="generateComboEmail()">Generate Combined Email</button>
        </div>

        <!-- Quote Display -->
        <div id="quoteDisplay" class="quote-display hidden"></div>
    </div>

    <script>
        // Password validation
        const validPasswords = ['4270', '4271', '4272', '4273', '4274', '4275', '4276', '4277', '4278', '4250'];
        
        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            const errorDiv = document.getElementById('errorMessage');
            
            if (validPasswords.includes(password)) {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('mainContainer').style.display = 'block';
                errorDiv.textContent = '';
            } else {
                errorDiv.textContent = 'Invalid access code. Please try again.';
                document.getElementById('passwordInput').value = '';
            }
        }

        // Allow Enter key on password input
        document.getElementById('passwordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        // Venue pricing data
        const venues = {
            // Event spaces with seasonal/daily pricing
            "Dogwood Ballroom": [6000, 20000, 4500, 15000, 3000, 10000, 2250, 7500],
            "Dogwood A": [3500, 10000, 2500, 7500, 2000, 5000, 1250, 3750],
            "Dogwood B": [2500, 10000, 2000, 7500, 1500, 5000, 1000, 3750],
            "The Gallery": [2000, 4000, 1500, 2500, 1000, 2500, 750, 1500],
            "Ozark Room": [1000, 3000, 750, 2250, 500, 1500, 375, 1125],
            "The Front Porch": [1000, 3000, 750, 2250, 500, 1500, 375, 1125],
            "Guestroom Suite": [500, 500, 500, 500, 250, 250, 250, 250],
            "The Atrium and Foyer": [1000, 3000, 750, 2250, 500, 1500, 375, 1125]
        };

        const fnbOutlets = {
            "The Eddy": [2500, 3500, 5000, 5000, 6500, 10000],
            "The Sunroom": [1000, 2000, 3000, 3000, 4000, 5000],
            "Sestina": [2000, 3500, 12000, 20000, 22000, 30000],
            "Private Dining Room": [1200, 2000, 6000, 5000, 6000, 8000]
        };

        // Global state
        let currentServiceType = '';
        let eventDates = [];
        let selectedSpaces = {};

        // Fixed date parsing to avoid timezone issues
        function parseLocalDate(dateString) {
            if (!dateString) return null;
            const [year, month, day] = dateString.split('-').map(Number);
            return new Date(year, month - 1, day); // month is 0-indexed in JS
        }

        // Section management functions
        function clearRoomsSection() {
            document.getElementById('checkInDate').value = '';
            document.getElementById('checkOutDate').value = '';
            document.getElementById('roomTableContainer').innerHTML = '';
            document.getElementById('businessPatternAlert').classList.add('hidden');
            document.getElementById('roomsActions').classList.add('hidden');
            document.getElementById('roomsRunningTotal').classList.add('hidden');
            document.getElementById('quoteDisplay').classList.add('hidden');
            updateRoomsTotal();
        }

        function clearEventsSection() {
            eventDates = [];
            selectedSpaces = {};
            document.getElementById('eventDate').value = '';
            document.getElementById('consecutiveButtonContainer').innerHTML = '';
            document.getElementById('eventDatesList').classList.add('hidden');
            document.getElementById('eventDatesContainer').innerHTML = '';
            document.getElementById('eventAddonsSection').classList.add('hidden');
            document.getElementById('eventsActions').classList.add('hidden');
            document.getElementById('eventsRunningTotal').classList.add('hidden');
            document.getElementById('quoteDisplay').classList.add('hidden');
            
            // Clear all addon checkboxes
            document.querySelectorAll('#eventAddonsSection input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.getElementById('avTechHours').classList.add('hidden');
            document.getElementById('chefDatesContainer').classList.add('hidden');
            document.getElementById('coatCheckDatesContainer').classList.add('hidden');
            updateEventsTotal();
        }

        function toggleRoomsSection() {
            const content = document.getElementById('roomsSectionContent');
            const btn = event.target;
            
            if (content.classList.contains('collapsed')) {
                content.classList.remove('collapsed');
                btn.textContent = 'Collapse';
            } else {
                content.classList.add('collapsed');
                btn.textContent = 'Expand';
            }
        }

        function toggleEventsSection() {
            const content = document.getElementById('eventsSectionContent');
            const btn = event.target;
            
            if (content.classList.contains('collapsed')) {
                content.classList.remove('collapsed');
                btn.textContent = 'Collapse';
            } else {
                content.classList.add('collapsed');
                btn.textContent = 'Expand';
            }
        }

        // Service type selection
        function selectServiceType(type) {
            currentServiceType = type;
            
            // Hide all sections
            document.getElementById('roomsSection').classList.add('hidden');
            document.getElementById('eventsSection').classList.add('hidden');
            document.getElementById('finalActions').classList.add('hidden');
            
            // Show relevant sections
            if (type === 'rooms' || type === 'combo') {
                document.getElementById('roomsSection').classList.remove('hidden');
            }
            if (type === 'event' || type === 'combo') {
                document.getElementById('eventsSection').classList.remove('hidden');
            }
            if (type === 'combo') {
                document.getElementById('finalActions').classList.remove('hidden');
                // Hide individual email buttons for combo
                const roomsEmail = document.getElementById('roomsEmailBtn');
                const eventsEmail = document.getElementById('eventsEmailBtn');
                if (roomsEmail) roomsEmail.classList.add('hidden');
                if (eventsEmail) eventsEmail.classList.add('hidden');
            } else {
                // Show individual email buttons for single sections
                const roomsEmail = document.getElementById('roomsEmailBtn');
                const eventsEmail = document.getElementById('eventsEmailBtn');
                if (roomsEmail) roomsEmail.classList.remove('hidden');
                if (eventsEmail) eventsEmail.classList.remove('hidden');
            }
            
            // Update button styles
            document.querySelectorAll('.service-type-buttons .btn').forEach(btn => {
                btn.classList.remove('btn-secondary');
                btn.classList.add('btn-primary');
            });
            event.target.classList.remove('btn-primary');
            event.target.classList.add('btn-secondary');
        }

        // Date utilities
        function getDateString(date) {
            return date.toISOString().split('T')[0];
        }

        function getDayName(date) {
            return date.toLocaleDateString('en-US', { weekday: 'short' });
        }

        function getDatesBetween(startDate, endDate) {
            const dates = [];
            const currentDate = new Date(startDate);
            
            // Fixed: Now correctly shows nights stayed (start date to end date - 1)
            while (currentDate < endDate) {
                dates.push(new Date(currentDate));
                currentDate.setDate(currentDate.getDate() + 1);
            }
            
            return dates;
        }

        // Running totals functions
        function updateRoomsTotal() {
            const checkIn = document.getElementById('checkInDate').value;
            const checkOut = document.getElementById('checkOutDate').value;
            
            if (!checkIn || !checkOut) {
                document.getElementById('roomsRunningTotal').classList.add('hidden');
                return;
            }
            
            const checkInDate = parseLocalDate(checkIn);
            const checkOutDate = parseLocalDate(checkOut);
            const dates = getDatesBetween(checkInDate, checkOutDate);
            
            let totalCost = 0;
            dates.forEach((date, index) => {
                const rooms = parseFloat(document.getElementById(`rooms_${index}`)?.value) || 0;
                const rate = parseFloat(document.getElementById(`rate_${index}`)?.value) || 0;
                totalCost += rooms * rate;
            });
            
            if (totalCost > 0) {
                document.getElementById('roomsTotalAmount').textContent = totalCost.toLocaleString();
                document.getElementById('roomsRunningTotal').classList.remove('hidden');
            } else {
                document.getElementById('roomsRunningTotal').classList.add('hidden');
            }
        }

        function updateEventsTotal() {
            let totalCost = 0;
            
            // Calculate space costs
            Object.keys(selectedSpaces).forEach(spaceKey => {
                const space = selectedSpaces[spaceKey];
                const headcountInput = document.querySelector(`#headcount_${space.venueName.replace(/\s+/g, '_')}_${space.dateIndex} input`);
                const headcount = headcountInput ? parseInt(headcountInput.value) || 0 : 0;
                
                if (headcount > 0) {
                    const pricing = getVenuePricing(space.venueName, space.date, space.isBusinessHours);
                    totalCost += pricing.roomRental + pricing.fnbMinimum;
                }
            });
            
            // Add addon costs
            const addons = [
                { id: 'projector', price: 350 },
                { id: 'screen', price: 150 },
                { id: 'speakerSystem', price: 150 },
                { id: 'monitor75', price: 300 },
                { id: 'handheldMic', price: 75 },
                { id: 'lavalierMic', price: 75 },
                { id: 'podium', price: 50 },
                { id: 'executiveBlotter', price: 25 }
            ];
            
            addons.forEach(addon => {
                if (document.getElementById(addon.id)?.checked) {
                    totalCost += addon.price;
                }
            });
            
            // AV Technician
            if (document.getElementById('avTechnician')?.checked) {
                const hours = parseInt(document.getElementById('avTechHours').value) || 0;
                totalCost += hours * 150;
            }
            
            // Chef and Coat Check (count selected dates)
            if (document.getElementById('chefAttendant')?.checked) {
                const selectedDates = document.querySelectorAll('[id^="chef_date_"]:checked').length;
                totalCost += selectedDates * 250;
            }
            
            if (document.getElementById('coatCheckAttendant')?.checked) {
                const selectedDates = document.querySelectorAll('[id^="coat_date_"]:checked').length;
                totalCost += selectedDates * 175;
            }
            
            // Apply multi-day discount if applicable
            if (eventDates.length >= 3) {
                totalCost *= 0.75; // 25% discount
            }
            
            if (totalCost > 0 || eventDates.length > 0) {
                document.getElementById('eventsTotalAmount').textContent = totalCost.toLocaleString();
                document.getElementById('eventsRunningTotal').classList.remove('hidden');
            } else {
                document.getElementById('eventsRunningTotal').classList.add('hidden');
            }
        }

        // Pricing logic
        function getPricingIndex(date) {
            const month = date.getMonth() + 1; // JavaScript months are 0-indexed
            const day = date.getDay(); // 0 = Sunday, 1 = Monday, etc.
            
            // Determine season
            const isPeakSeason = (month >= 3 && month <= 6) || month === 9 || month === 10;
            
            let isPeakDay;
            if (isPeakSeason) {
                // Peak Season: Peak Days are Mon(1), Tue(2), Wed(3), Fri(5), Sat(6)
                isPeakDay = [1, 2, 3, 5, 6].includes(day);
            } else {
                // Need Season: Peak Days are Tue(2), Wed(3), Fri(5), Sat(6)
                isPeakDay = [2, 3, 5, 6].includes(day);
            }
            
            // Return index for pricing array [0-7]
            if (isPeakSeason && isPeakDay) return 0; // Room Rental (Peak Season, Peak Day)
            if (isPeakSeason && !isPeakDay) return 2; // Room Rental (Peak Season, Need Day)
            if (!isPeakSeason && isPeakDay) return 4; // Room Rental (Need Season, Peak Day)
            return 6; // Room Rental (Need Season, Need Day)
        }

        function getFNBPricingIndex(date, isBusinessHours, venue) {
            const day = date.getDay(); // 0 = Sunday, 1 = Monday, etc.
            
            let dayGroup;
            if (venue === "Sestina" || venue === "Private Dining Room") {
                // Special grouping for these venues
                if (!isBusinessHours) {
                    if ([1, 2, 3].includes(day)) dayGroup = 0; // Mon-Wed
                    else if ([4, 5].includes(day)) dayGroup = 1; // Thu-Fri
                    else dayGroup = 2; // Sat-Sun
                } else {
                    if ([0, 1, 2].includes(day)) dayGroup = 3; // Sun-Tue
                    else if ([3, 4].includes(day)) dayGroup = 4; // Wed-Thu
                    else dayGroup = 5; // Fri-Sat
                }
            } else {
                // Standard grouping
                if (!isBusinessHours) {
                    if ([1, 2, 3].includes(day)) dayGroup = 0; // Mon-Wed
                    else if ([4, 5].includes(day)) dayGroup = 1; // Thu-Fri
                    else dayGroup = 2; // Sat-Sun
                } else {
                    if ([0, 1].includes(day)) dayGroup = 3; // Sun-Mon
                    else if ([2, 3, 4].includes(day)) dayGroup = 4; // Tue-Thu
                    else dayGroup = 5; // Fri-Sat
                }
            }
            
            return dayGroup;
        }

        function getVenuePricing(venue, date, isBusinessHours = false) {
            if (venues[venue]) {
                const index = getPricingIndex(date);
                return {
                    roomRental: venues[venue][index],
                    fnbMinimum: venues[venue][index + 1]
                };
            } else if (fnbOutlets[venue]) {
                const index = getFNBPricingIndex(date, isBusinessHours, venue);
                return {
                    roomRental: 0,
                    fnbMinimum: fnbOutlets[venue][index]
                };
            }
            return { roomRental: 0, fnbMinimum: 0 };
        }

        // Business pattern alerts
        function checkBusinessPattern(checkIn, checkOut) {
            const checkInDay = checkIn.getDay();
            const checkOutDay = checkOut.getDay();
            
            // Tuesday check-in with Wednesday/Thursday check-out
            if (checkInDay === 2 && (checkOutDay === 3 || checkOutDay === 4)) {
                return true;
            }
            
            // Wednesday check-in with Thursday/Friday check-out
            if (checkInDay === 3 && (checkOutDay === 4 || checkOutDay === 5)) {
                return true;
            }
            
            return false;
        }

        // Room section functions
        function updateRoomDates() {
            const checkIn = document.getElementById('checkInDate').value;
            const checkOut = document.getElementById('checkOutDate').value;
            
            if (checkIn && checkOut) {
                const checkInDate = parseLocalDate(checkIn);
                const checkOutDate = parseLocalDate(checkOut);
                
                if (checkBusinessPattern(checkInDate, checkOutDate)) {
                    document.getElementById('businessPatternAlert').classList.remove('hidden');
                } else {
                    document.getElementById('businessPatternAlert').classList.add('hidden');
                }
            }
            updateRoomsTotal();
        }

        function generateRoomTable() {
            const checkIn = document.getElementById('checkInDate').value;
            const checkOut = document.getElementById('checkOutDate').value;
            
            if (!checkIn || !checkOut) {
                alert('Please select both check-in and check-out dates');
                return;
            }
            
            const checkInDate = parseLocalDate(checkIn);
            const checkOutDate = parseLocalDate(checkOut);
            const dates = getDatesBetween(checkInDate, checkOutDate);
            
            if (dates.length === 0) {
                alert('Check-out date must be after check-in date');
                return;
            }
            
            let tableHTML = '<table class="date-table"><thead><tr><th>Metric</th>';
            
            dates.forEach(date => {
                const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                const dayStr = getDayName(date);
                tableHTML += `<th>${dateStr}<br>(${dayStr})</th>`;
            });
            
            tableHTML += '</tr></thead><tbody>';
            tableHTML += '<tr><td><strong>Rooms Needed</strong></td>';
            
            dates.forEach((date, index) => {
                tableHTML += `<td><input type="number" id="rooms_${index}" min="0" placeholder="0" onchange="updateRoomsTotal()"></td>`;
            });
            
            tableHTML += '</tr><tr><td><strong>Agreed Rate</strong></td>';
            
            dates.forEach((date, index) => {
                tableHTML += `<td><input type="number" id="rate_${index}" min="0" placeholder="$0" step="0.01" onchange="updateRoomsTotal()"></td>`;
            });
            
            tableHTML += '</tr></tbody></table>';
            
            document.getElementById('roomTableContainer').innerHTML = tableHTML;
            document.getElementById('roomsActions').classList.remove('hidden');
            updateRoomsTotal();
        }

        // Event section functions
        function addEventDate() {
            const dateInput = document.getElementById('eventDate');
            const date = dateInput.value;
            
            if (!date) {
                alert('Please select an event date');
                return;
            }
            
            const eventDate = parseLocalDate(date);
            if (!eventDates.some(d => d.getTime() === eventDate.getTime())) {
                eventDates.push(eventDate);
                updateEventDatesDisplay();
                updateConsecutiveButton();
                generateEventDateSections();
                showEventAddons();
                showEventActions();
            }
            
            dateInput.value = '';
        }

        function updateConsecutiveButton() {
            const container = document.getElementById('consecutiveButtonContainer');
            
            if (eventDates.length > 0) {
                const lastDate = new Date(Math.max(...eventDates));
                const nextDate = new Date(lastDate);
                nextDate.setDate(nextDate.getDate() + 1);
                
                const nextDateStr = nextDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric' });
                
                container.innerHTML = `<button class="btn consecutive-btn btn-small" onclick="addConsecutiveDate()">Add ${nextDateStr}</button>`;
            } else {
                container.innerHTML = '';
            }
        }

        function addConsecutiveDate() {
            if (eventDates.length > 0) {
                const lastDate = new Date(Math.max(...eventDates));
                const nextDate = new Date(lastDate);
                nextDate.setDate(nextDate.getDate() + 1);
                
                eventDates.push(nextDate);
                updateEventDatesDisplay();
                updateConsecutiveButton();
                generateEventDateSections();
            }
        }

        function updateEventDatesDisplay() {
            const container = document.getElementById('eventDatesList');
            
            if (eventDates.length > 0) {
                container.classList.remove('hidden');
                
                let html = '<h3>Selected Event Dates:</h3>';
                eventDates.sort((a, b) => a - b).forEach((date, index) => {
                    const dateStr = date.toLocaleDateString('en-US', { 
                        weekday: 'long', 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    });
                    html += `<div class="date-item">
                        <span>${dateStr}</span>
                        <button class="btn btn-danger btn-small" onclick="removeEventDate(${index})">Remove</button>
                    </div>`;
                });
                
                container.innerHTML = html;
            } else {
                container.classList.add('hidden');
            }
            
            // Update chef and coat check date checkboxes
            updateServiceDateCheckboxes();
        }

        function removeEventDate(index) {
            eventDates.splice(index, 1);
            updateEventDatesDisplay();
            updateConsecutiveButton();
            generateEventDateSections();
            
            if (eventDates.length === 0) {
                document.getElementById('eventAddonsSection').classList.add('hidden');
                document.getElementById('eventsActions').classList.add('hidden');
                document.getElementById('eventDatesContainer').innerHTML = '';
                document.getElementById('eventsRunningTotal').classList.add('hidden');
            }
            updateEventsTotal();
        }

        function generateEventDateSections() {
            const container = document.getElementById('eventDatesContainer');
            
            if (eventDates.length === 0) {
                container.innerHTML = '';
                return;
            }
            
            container.innerHTML = '';
            const sortedDates = [...eventDates].sort((a, b) => a - b);
            
            sortedDates.forEach((date, dateIndex) => {
                const dateStr = date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'event-date-section';
                sectionDiv.innerHTML = `
                    <h3>${dateStr}</h3>
                    <div class="space-selection" id="spaces_date_${dateIndex}"></div>
                `;
                
                container.appendChild(sectionDiv);
                
                // Generate spaces for this date
                generateSpacesForDate(date, dateIndex);
            });
            updateEventsTotal();
        }

        function generateSpacesForDate(date, dateIndex) {
            const container = document.getElementById(`spaces_date_${dateIndex}`);
            let html = '';
            
            // Add event spaces
            Object.keys(venues).forEach(venueName => {
                const pricing = getVenuePricing(venueName, date);
                
                html += `<div class="space-card" onclick="toggleSpaceSelection('${venueName}', ${dateIndex})">
                    <h3>${venueName}</h3>
                    <div class="space-rates">
                        Room Rental: $${pricing.roomRental.toLocaleString()}<br>
                        F&B Minimum: $${pricing.fnbMinimum.toLocaleString()}
                    </div>
                    <div class="headcount-input" id="headcount_${venueName.replace(/\s+/g, '_')}_${dateIndex}">
                        <label>Headcount:</label>
                        <input type="number" min="1" placeholder="Enter headcount" onclick="event.stopPropagation()" onchange="updateEventsTotal()">
                    </div>
                </div>`;
            });
            
            // Add F&B outlets
            Object.keys(fnbOutlets).forEach(venueName => {
                const samplePricing = getVenuePricing(venueName, date, false);
                const businessPricing = getVenuePricing(venueName, date, true);
                
                html += `<div class="space-card" onclick="toggleSpaceSelection('${venueName}', ${dateIndex})">
                    <h3>${venueName}</h3>
                    <div class="space-rates">
                        Non-Business: $${samplePricing.fnbMinimum.toLocaleString()}<br>
                        Business: $${businessPricing.fnbMinimum.toLocaleString()}
                        <button class="btn btn-small business-hours-toggle" onclick="event.stopPropagation(); toggleBusinessHours('${venueName}', ${dateIndex})">
                            <span id="toggle_${venueName.replace(/\s+/g, '_')}_${dateIndex}">Non-Business</span>
                        </button>
                    </div>
                    <div class="headcount-input" id="headcount_${venueName.replace(/\s+/g, '_')}_${dateIndex}">
                        <label>Headcount:</label>
                        <input type="number" min="1" placeholder="Enter headcount" onclick="event.stopPropagation()" onchange="updateEventsTotal()">
                    </div>
                </div>`;
            });
            
            container.innerHTML = html;
        }

        function toggleSpaceSelection(venueName, dateIndex) {
            const card = event.currentTarget;
            const headcountDiv = document.getElementById(`headcount_${venueName.replace(/\s+/g, '_')}_${dateIndex}`);
            const spaceKey = `${venueName}_${dateIndex}`;
            
            if (card.classList.contains('selected')) {
                card.classList.remove('selected');
                headcountDiv.classList.remove('show');
                delete selectedSpaces[spaceKey];
            } else {
                card.classList.add('selected');
                headcountDiv.classList.add('show');
                const sortedDates = [...eventDates].sort((a, b) => a - b);
                selectedSpaces[spaceKey] = {
                    venueName: venueName,
                    dateIndex: dateIndex,
                    date: sortedDates[dateIndex],
                    isBusinessHours: false,
                    headcount: 0
                };
            }
            updateEventsTotal();
        }

        function toggleBusinessHours(venueName, dateIndex) {
            const toggleBtn = document.getElementById(`toggle_${venueName.replace(/\s+/g, '_')}_${dateIndex}`);
            const isCurrentlyBusiness = toggleBtn.textContent === 'Business';
            const spaceKey = `${venueName}_${dateIndex}`;
            
            if (selectedSpaces[spaceKey]) {
                selectedSpaces[spaceKey].isBusinessHours = !isCurrentlyBusiness;
                toggleBtn.textContent = isCurrentlyBusiness ? 'Non-Business' : 'Business';
                updateEventsTotal();
            }
        }

        function showEventAddons() {
            if (eventDates.length > 0) {
                document.getElementById('eventAddonsSection').classList.remove('hidden');
                updateServiceDateCheckboxes();
            }
        }

        function showEventActions() {
            if (eventDates.length > 0) {
                document.getElementById('eventsActions').classList.remove('hidden');
            }
        }

        // Add-on functions
        function toggleAVTechHours() {
            const checkbox = document.getElementById('avTechnician');
            const hoursInput = document.getElementById('avTechHours');
            
            if (checkbox.checked) {
                hoursInput.classList.remove('hidden');
            } else {
                hoursInput.classList.add('hidden');
                hoursInput.value = '';
            }
            updateEventsTotal();
        }

        function toggleChefDates() {
            const checkbox = document.getElementById('chefAttendant');
            const container = document.getElementById('chefDatesContainer');
            
            if (checkbox.checked) {
                container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
            }
            updateEventsTotal();
        }

        function toggleCoatCheckDates() {
            const checkbox = document.getElementById('coatCheckAttendant');
            const container = document.getElementById('coatCheckDatesContainer');
            
            if (checkbox.checked) {
                container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
            }
            updateEventsTotal();
        }

        function updateServiceDateCheckboxes() {
            const chefContainer = document.getElementById('chefDatesContainer');
            const coatContainer = document.getElementById('coatCheckDatesContainer');
            
            let html = '';
            eventDates.sort((a, b) => a - b).forEach((date, index) => {
                const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                html += `<div>
                    <input type="checkbox" id="chef_date_${index}" value="${index}" onchange="updateEventsTotal()">
                    <label for="chef_date_${index}">${dateStr}</label>
                </div>`;
            });
            chefContainer.innerHTML = html;
            
            html = '';
            eventDates.sort((a, b) => a - b).forEach((date, index) => {
                const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                html += `<div>
                    <input type="checkbox" id="coat_date_${index}" value="${index}" onchange="updateEventsTotal()">
                    <label for="coat_date_${index}">${dateStr}</label>
                </div>`;
            });
            coatContainer.innerHTML = html;
        }

        // Quote generation functions
        function viewRoomsQuote() {
            const checkIn = document.getElementById('checkInDate').value;
            const checkOut = document.getElementById('checkOutDate').value;
            
            if (!checkIn || !checkOut) return;
            
            const checkInDate = parseLocalDate(checkIn);
            const checkOutDate = parseLocalDate(checkOut);
            const dates = getDatesBetween(checkInDate, checkOutDate);
            
            let totalCost = 0;
            let quoteHTML = '<h3>Room Block Quote</h3>';
            
            dates.forEach((date, index) => {
                const rooms = document.getElementById(`rooms_${index}`).value || 0;
                const rate = document.getElementById(`rate_${index}`).value || 0;
                const dailyCost = rooms * rate;
                
                const dateStr = date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    month: 'long', 
                    day: 'numeric',
                    year: 'numeric'
                });
                
                quoteHTML += `<div class="quote-day">
                    <strong>${dateStr}</strong><br>
                    ${rooms} rooms √ó $${parseFloat(rate).toLocaleString()} = $${dailyCost.toLocaleString()}
                </div>`;
                
                totalCost += dailyCost;
            });
            
            // NO multi-day discount for room blocks!
            quoteHTML += `<div class="quote-total">Total: $${totalCost.toLocaleString()}</div>`;
            
            document.getElementById('quoteDisplay').innerHTML = quoteHTML;
            document.getElementById('quoteDisplay').classList.remove('hidden');
        }

        function viewEventsQuote() {
            if (eventDates.length === 0) return;
            
            let totalCost = 0;
            let quoteHTML = '<h3>Event Quote</h3>';
            
            // Sort dates for display
            const sortedDates = [...eventDates].sort((a, b) => a - b);
            
            // Calculate costs per date
            sortedDates.forEach((date, dateIndex) => {
                const dateStr = date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    month: 'long', 
                    day: 'numeric',
                    year: 'numeric'
                });
                
                let dateCost = 0;
                let dateHTML = `<div class="quote-day"><strong>${dateStr}</strong><br>`;
                
                Object.keys(selectedSpaces).forEach(spaceKey => {
                    const space = selectedSpaces[spaceKey];
                    if (space.dateIndex === dateIndex) {
                        const headcountInput = document.querySelector(`#headcount_${space.venueName.replace(/\s+/g, '_')}_${dateIndex} input`);
                        const headcount = headcountInput ? parseInt(headcountInput.value) || 0 : 0;
                        
                        if (headcount > 0) {
                            const pricing = getVenuePricing(space.venueName, date, space.isBusinessHours);
                            const spaceCost = pricing.roomRental + pricing.fnbMinimum;
                            const pricePerHead = headcount > 0 ? (pricing.fnbMinimum / headcount).toFixed(2) : 0;
                            
                            dateHTML += `${space.venueName}: $${pricing.roomRental.toLocaleString()} room`;
                            if (pricing.fnbMinimum > 0) {
                                dateHTML += ` + $${pricing.fnbMinimum.toLocaleString()} F&B (${headcount} people = $${pricePerHead}/head)`;
                            }
                            dateHTML += ` = $${spaceCost.toLocaleString()}<br>`;
                            
                            dateCost += spaceCost;
                        }
                    }
                });
                
                // Add daily services for this date
                if (document.getElementById('chefAttendant')?.checked) {
                    const chefCheckboxes = document.querySelectorAll('[id^="chef_date_"]:checked');
                    chefCheckboxes.forEach(cb => {
                        const checkboxDateIndex = parseInt(cb.value);
                        if (checkboxDateIndex === dateIndex) {
                            dateHTML += `Chef Attendant: $250<br>`;
                            dateCost += 250;
                        }
                    });
                }
                
                if (document.getElementById('coatCheckAttendant')?.checked) {
                    const coatCheckboxes = document.querySelectorAll('[id^="coat_date_"]:checked');
                    coatCheckboxes.forEach(cb => {
                        const checkboxDateIndex = parseInt(cb.value);
                        if (checkboxDateIndex === dateIndex) {
                            dateHTML += `Coat Check Attendant: $175<br>`;
                            dateCost += 175;
                        }
                    });
                }
                
                dateHTML += `<strong>Daily Total: $${dateCost.toLocaleString()}</strong></div>`;
                quoteHTML += dateHTML;
                totalCost += dateCost;
            });
            
            // Add one-time add-ons
            let addonCost = 0;
            let addonHTML = '';
            
            const addons = [
                { id: 'projector', name: 'Projector', price: 350 },
                { id: 'screen', name: 'Screen', price: 150 },
                { id: 'speakerSystem', name: 'Speaker System', price: 150 },
                { id: 'monitor75', name: '75" Portable Monitor', price: 300 },
                { id: 'handheldMic', name: 'Handheld Microphone', price: 75 },
                { id: 'lavalierMic', name: 'Lavalier Microphone', price: 75 },
                { id: 'podium', name: 'Podium', price: 50 },
                { id: 'executiveBlotter', name: 'Executive Blotter', price: 25 }
            ];
            
            addons.forEach(addon => {
                if (document.getElementById(addon.id)?.checked) {
                    addonHTML += `${addon.name}: $${addon.price}<br>`;
                    addonCost += addon.price;
                }
            });
            
            // AV Technician
            if (document.getElementById('avTechnician')?.checked) {
                const hours = parseInt(document.getElementById('avTechHours').value) || 0;
                const cost = hours * 150;
                addonHTML += `AV Technician (${hours} hours): $${cost.toLocaleString()}<br>`;
                addonCost += cost;
            }
            
            if (addonHTML) {
                quoteHTML += `<div class="quote-day"><strong>Add-ons:</strong><br>${addonHTML}<strong>Add-ons Total: $${addonCost.toLocaleString()}</strong></div>`;
                totalCost += addonCost;
            }
            
            // Multi-day discount ONLY for events (3+ days)
            if (eventDates.length >= 3) {
                const discount = totalCost * 0.25;
                quoteHTML += `<div class="quote-day">
                    <strong style="color: var(--secondary-burgundy);">Multi-Day Discount (25%): -$${discount.toLocaleString()}</strong>
                </div>`;
                totalCost -= discount;
            }
            
            quoteHTML += `<div class="quote-total">Total: $${totalCost.toLocaleString()}</div>`;
            
            document.getElementById('quoteDisplay').innerHTML = quoteHTML;
            document.getElementById('quoteDisplay').classList.remove('hidden');
        }

        // Email generation functions
        function generateRoomsEmail() {
            alert('Rooms email template will be implemented with your specific template!');
        }

        function generateEventsEmail() {
            alert('Events email template will be implemented with your specific template!');
        }

        function generateComboEmail() {
            alert('Combined rooms + events email template will be implemented with your specific template!');
        }
    </script>
</body>
</html>
